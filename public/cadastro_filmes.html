<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar filme</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/cadastro_filmes.css">
</head>
<body>
    <header style="background-color: rgb(81, 0, 0);">
        <div class="container">
            <div class="row">
                <div class="col-7 col-md-7">
                    <h1> <a class="logo" href="index.html" style="text-decoration: none; color: white; font-family: 'Times New Roman', Times, serif;">The Catalogue</a></h1>
                </div>
                <div class="col-1 col-md-1">

                </div>
                <div class="col-3 col-md-3">
                    <a id="config" href="#">Configurações</a>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12 col-md-12">
                    <div class="botao-container">
                        <h4 id="relatorioCompleto">Adicionar filme</h4>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div id="container-main" class="container">
        <div id="main-content">
            <div class="row">
                <div class="col-4 col-md-4">
                    <h3 id="periodo-titulo">Título:</h3>
                    <div>
                        <form>
                            <input class="input-periodo" id="input-titulo" type="text" placeholder="Título do filme" required>
                        </form>
                    </div>
                </div>
                <div id="local-div" class="col-4 col-md-4">
                    <h3 id="localizacao-titulo">Descrição:</h3>
                    <div>
                        <form>
                            <input class="input-local" id="input-desc" type="text" placeholder="Breve descrição" required>
                        </form>
                    </div>
                </div>
                <div id="tipo-div" class="col-4 col-md-4">
                    <h3 id="tipo-titulo">Conteúdo:</h3> 
                    <div>
                        <form>
                            <TExtarea cols="42" rows="4" placeholder="Sinopse" class="tipo-violencia" id="input-sinopse" required></TExtarea cols="42" rows="4">
                        </form>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-4 col-md-4">
                    <h3 id="periodo-titulo">Categorias:</h3>
                    <div>
                        <form>
                            <input class="input-periodo" id="input-categoria" type="text" placeholder="Ação Aventura Fantasia..." required>
                        </form>
                    </div>
                </div>
                <div id="local-div" class="col-4 col-md-4">
                    <h3 id="localizacao-titulo">Diretor:</h3>
                    <div>
                        <form>
                            <input class="input-local" id="input-diretor" type="text" placeholder="Diretor do filme" required>
                        </form>
                    </div>
                </div>
                <div id="tipo-div" class="col-4 col-md-4">
                    <h3 id="tipo-titulo">Data de lançamento:</h3> 
                    <div>
                        <form>
                            <input class="tipo-violencia" id="input-data" type="text" name="tipo-violencia" placeholder="AAAA-MM-DD" required>
                        </form>
                    </div>
                </div>
                
            </div>
            <div class="row">
                <div class="col-4 col-md-4">
                    <h3 id="periodo-titulo">Imagem</h3>
                    <div>
                        <form>
                            <input class="input-periodo" type="file" placeholder="Imagem" id="imageInput"  accept="image/*" required>
                            <img id="preview" src="" alt="Preview da imagem" style="max-width: 190%;">

                        </form>
                    </div>
                </div>
                <div class="col-4 col-md-4">
                    <h3 id="periodo-titulo">ID</h3>
                    <div>
                        <form>
                            <input class="input-periodo" type="number" placeholder="Preencha apenas quando for editar/excluir" id="input-id">
                        </form>
                    </div>
                </div>
            </div>

                
            <div class="row">
                <div class="col-12 col-md-12">
                    <div class="botao-container" style="margin-bottom: 2vh;">
                        <button id="sendBtn" style="background-color: rgb(81, 0, 0); color: white; border: none; padding: 0.6%;border-radius: 5%;">Cadastrar</button>
                        <button id="updateBtn" style="background-color: rgb(81, 0, 0); color: white; border: none; padding: 0.6%; margin-left: 3%; margin-right: 3%; border-radius: 5%;">Alterar</button>
                        <button id="deleteBtn" style="background-color: rgb(81, 0, 0); color: white; border: none; padding: 0.6%; border-radius: 5%;">Excluir</button>

                    </div>
                </div>
            </div>


            
        </div>
    </div>


<script>
/*
    document.getElementById('sendBtn').addEventListener('click', function() {
        const fileInput = document.getElementById('imageInput');
        const titulo = document.getElementById('input-titulo').value;
        const descricao = document.getElementById('input-desc').value;
        const conteudo = document.getElementById('input-sinopse').value;
        const categoria = document.getElementById('input-categoria').value;
        const diretor = document.getElementById('input-diretor').value;
        const data = document.getElementById('input-data').value;
        
        const file = fileInput.files[0];

        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();

            reader.onload = function(e) {
                const imageData = e.target.result;

                var raw = JSON.stringify({
                    "titulo": titulo,
                    "descricao": descricao,
                    "conteudo": conteudo,
                    "categoria": categoria,
                    "diretor": diretor,
                    "data": data,
                    "imagem_pincipal": imageData
                });

                fetch('http://localhost:3000/filmes', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: raw
                })
                .then(res => res.json())
                .then(data => {
                    alert('Filme adicionado!');
                    console.log(data);
                });
            };

            reader.readAsDataURL(file);
        } else {
            alert('Selecione uma imagem válida.');
        }
    });

    document.getElementById('updateBtn').addEventListener('click', function() {
        const fileInput = document.getElementById('imageInput');
        const titulo = document.getElementById('input-titulo').value;
        const descricao = document.getElementById('input-desc').value;
        const conteudo = document.getElementById('input-sinopse').value;
        const categoria = document.getElementById('input-categoria').value;
        const diretor = document.getElementById('input-diretor').value;
        const data = document.getElementById('input-data').value;
        const inputId = document.getElementById('input-id').value;
        
        const file = fileInput.files[0];

        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();

            reader.onload = function(e) {
                const imageData = e.target.result;

                var raw = JSON.stringify({
                    "titulo": titulo,
                    "descricao": descricao,
                    "conteudo": conteudo,
                    "categoria": categoria,
                    "diretor": diretor,
                    "data": data,
                    "imagem_pincipal": imageData
                });

                fetch(`http://localhost:3000/filmes/${inputId}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: raw
                })
                .then(res => res.json())
                .then(data => {
                    alert('Filme atualizado!');
                    console.log(data);
                });
                
            };

            reader.readAsDataURL(file);
        } else {
            alert('Selecione uma imagem válida.');
        }
    });


    document.getElementById('deleteBtn').addEventListener('click', function() {
        const inputId = document.getElementById('input-id').value;
        
 
        fetch(`http://localhost:3000/filmes/${inputId}`, {
            method: 'DELETE',
            headers: { 'Content-Type': 'application/json' },
        })
        .then(res => res.json())
        .then(data => {
            alert('Filme excluído!');
            console.log(data);
        });

            
    });



    window.addEventListener("DOMContentLoaded", () => {
    });*/
</script>
    
</body>
</html>